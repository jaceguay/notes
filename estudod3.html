<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Estudo</title>
    <script src="https://ajax.googleapis.com/ajax/libs/d3js/5.14.2/d3.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>
    <svg></svg>
    <br>
    <button type="button" id="olabb">
        <b>Olá</b>
    </button>
    <script>
        testeJ = d3.json("dados.geojson", (data) => {
            return data
        });
        testeJ.then((value) => {
            console.log(value.features);
        });

        const altura = 300;
        const largura = 200;
        const svg = d3.select('svg');
        svg
            .attr('width', altura)
            .attr('height', largura)
            .style('background-color', '#ffe6ff');

        //corpo
        svg
            .append('circle')
            .attr('r', 80)
            .attr('cx', altura / 2)
            .attr('cy', largura / 2)
            .attr('fill', 'yellow')
            .attr('stroke', 'black');

        //olho esquerdo
        svg
            .append('circle')
            .attr('r', 10)
            .attr('cx', altura / 2 - 35)
            .attr('cy', largura / 2 - 25)
            .attr('fill', 'black');

        //olho esquerdo
        svg
            .append('circle')
            .attr('r', 10)
            .attr('cx', altura / 2 + 35)
            .attr('cy', largura / 2 - 25)
            .attr('fill', 'black');

        //boca
        const grupo = svg.append('g')
            .attr('transform', 'translate(150,110)');

        const boca = grupo
            .append('path')
            .attr('d', d3.arc()({
                innerRadius: 28,
                outerRadius: 30,
                startAngle: Math.PI / 2,
                endAngle: Math.PI * 3 / 2
            }));

        //sombrancelhas
        const sombrancelhas = svg
            .append('g')
            .attr('transform', 'translate (100,50)');

        //sombrancelha esquerda
        sombrancelhas
            .append('rect')
            .attr('x', 70)
            .attr('width', 30)
            .attr('height', 10);

        //sombrancelha direita
        sombrancelhas
            .append('rect')
            .attr('x', 0)
            .attr('width', 30)
            .attr('height', 10);

        $('#olabb').click(function () {
            //animação sombrancelhas
            sombrancelhas
                .transition().duration(1000)
                .attr('transform', 'translate(100,42)')
                .transition().duration(1000)
                .attr('transform', 'translate(100,50)')
        });

    </script>
</body>

</html>